---
title: Password Change
description: A guide in my new Starlight docs site.
---

import { Code, FileTree } from "@astrojs/starlight/components";


**Description:** This api changes the user's password.

<FileTree>
- routes
  - **api.password-change.ts**
</FileTree>

## Expected input

---

request type Request contains formData of the user's old password, verification of it and the new password

<Code
  title="Password Change Api Request Json"
  lang="json"
  code={`
    {
        "newPassword": string,
        "newPasswordRepeat": string,
        "oldPassword": string,
    }
    `}
/>


## Expected return

---

<Code
  title="Password Change Api Response"
  lang="python"
  
  code={`
    try {
      await changePassword(user.id, hashedNewPassword);
      return json(
        {},
        {
          headers: await createToastHeaders({
            title: 'paswword_updated',
            type: 'success',
            messages: [{ description: 'Paswword_Updated_successfully' }],
          }),
        },
      );
        } catch (e) {
        return json(
        {},
        {
          headers: await createToastHeaders({
            title: 'error_updating_password',
            type: 'error',
            messages: [{ description: 'updating_password_error_text' }],
          }),
        },
      );
    }
  } catch (e) {
    return json(
      {},
      {
        headers: await createToastHeaders({
          title: 'error_updating_password',
          type: 'error',
          messages: [{ description: 'updating_password_connection_error' }],
        }),
      },
    );
  }
`}

/>

### Valid response

###### Body
The function returns a toast with information about the password change result

###### Status

200 OK

### Exception response

###### Body
The function returns a toast with information about error that had occured

###### Status

response status code